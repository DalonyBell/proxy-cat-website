<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2a2522">
    <title>About Proxy - My Special Cat</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Supabase Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
    <script src="auth.js"></script>
    
    <script>
        // Only check for login status to update UI, but don't require authentication
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // Check if user is logged in to customize the UI
                const isUserLoggedIn = await isLoggedIn();
                const user = isUserLoggedIn ? await getCurrentUser() : null;
                
                // Update UI based on logged in state
                updateNavigation(isUserLoggedIn, user);
            } catch (error) {
                console.error("Error checking authentication:", error);
            }
        });
        
        // Update navigation based on auth status
        function updateNavigation(isLoggedIn, user) {
            const dropdownContent = document.querySelector('.dropdown-content');
            
            // Clear any existing auth-dependent links
            const logoutLink = document.getElementById('logout-link');
            if (logoutLink) logoutLink.remove();
            
            const accountInfo = document.getElementById('account-info');
            if (accountInfo) accountInfo.remove();
            
            // Update navigation based on login status
            if (isLoggedIn && user) {
                // Add logout option
                const newLogoutLink = document.createElement('a');
                newLogoutLink.href = "#";
                newLogoutLink.id = "logout-link";
                newLogoutLink.textContent = "Log Out";
                newLogoutLink.addEventListener('click', async function(e) {
                    e.preventDefault();
                    await logOut();
                });
                dropdownContent.appendChild(newLogoutLink);
                
                // Show user info
                const userInfo = document.createElement('div');
                userInfo.id = "account-info";
                userInfo.className = "account-info";
                userInfo.textContent = `Logged in: ${user.email}`;
                document.querySelector('.nav-container').prepend(userInfo);
                
                // Update login link text
                const loginLink = document.querySelector('a[href="login.html"]');
                if (loginLink) loginLink.textContent = "Account";
            }
        }
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="logo">Proxy</div>
        <div class="nav-container">
            <div class="dropdown">
                <button class="dropbtn">Menu <i class="fas fa-caret-down"></i></button>
                <div class="dropdown-content">
                    <a href="index.html">Home</a>
                    <a href="about.html">About</a>
                    <a href="donate.html">Donate</a>
                    <a href="login.html">Log In</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="hero small-hero">
        <h1>About Proxy</h1>
        <p class="subtitle">The story of my feline friend</p>
    </div>

    <div class="container">
        <section class="content-section">
            <div class="text-content">
                <h2>Her Story</h2>
                <p>I found Proxy three years ago on a rainy autumn evening. She was huddled beneath the porch of my apartment building, a tiny ball of damp fur with cautious eyes. Despite her initial reluctance, something about her independent spirit called to me.</p>
                <p>After some coaxing with treats and patience, she allowed me to bring her inside. The vet estimated she was about a year old at the time. From that day forward, we've been inseparable companions - though she'd never admit it.</p>
            </div>
            <div class="image-content">
                <img src="images/proxy-first-day.jpg" alt="Proxy's first day at home" class="cat-image">
            </div>
        </section>

        <section class="content-section reverse">
            <div class="text-content">
                <h2>Her Personality</h2>
                <p>Proxy is the definition of a cat with attitude. She has her routines and preferences, and heaven help anyone who tries to disrupt them. Her favorite spot is on the windowsill in the afternoon sun, where she can watch birds and judge passersby with equal disdain.</p>
                <p>Despite her stubborn nature, she shows affection in her own subtle ways - sleeping at the foot of my bed, bringing me "gifts" (usually hair ties), and occasionally gracing me with a purring session when the mood strikes her.</p>
            </div>
            <div class="image-content">
                <img src="images/proxy-sunbathing.jpg" alt="Proxy sunbathing by the window" class="cat-image">
            </div>
        </section>

        <section class="content-section">
            <div class="text-content">
                <h2>Her Health Journey</h2>
                <p>About two months ago, I noticed Proxy was grooming her belly excessively. Soon after, small patches of fur began to thin. Initially, I thought it might be seasonal shedding, but it quickly became apparent this was something more concerning.</p>
                <p>Our local vet has diagnosed it as potential allergic dermatitis, but we need to see a feline dermatology specialist to confirm and create a proper treatment plan. The specialist visits, tests, and medications will be costly, but Proxy deserves the best care possible.</p>
                <p>This website is my way of reaching out to fellow cat lovers who understand the special bond we share with our feline friends and might be willing to help Proxy get the care she needs.</p>
                <a href="donate.html" class="cta-button">Support Proxy's Treatment</a>
            </div>
            <div class="image-content">
                <img src="images/proxy-vet.jpg" alt="Proxy at the veterinarian" class="cat-image">
            </div>
        </section>

        <section class="gallery">
            <h2>Proxy's Gallery</h2>
            <div class="gallery-container">
                <div class="gallery-item">
                    <img src="images/proxy-sleeping.jpg" alt="Proxy sleeping peacefully" class="cat-image">
                </div>
                <div class="gallery-item">
                    <img src="images/proxy-playing.jpg" alt="Proxy playing with a toy" class="cat-image">
                </div>
                <div class="gallery-item">
                    <img src="images/proxy-eating.jpg" alt="Proxy enjoying her meal" class="cat-image">
                </div>
                <div class="gallery-item">
                    <img src="images/proxy-judging.jpg" alt="Proxy judging with a stern look" class="cat-image">
                </div>
            </div>
        </section>
    </div>

    <footer>
        <div class="sponsors">
            <p>Proudly supported by:</p>
            <div class="sponsor-logos">
                <div class="sponsor">Paw Patrol™</div>
                <div class="sponsor">DalonyBell SRL</div>
                <div class="sponsor">Whisker Wonders Inc.</div>
                <div class="sponsor">Feline Futures Ltd.</div>
            </div>
        </div>
        <p class="copyright">© 2025 Proxy's Human. All Rights Reserved.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>